<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sign Up - RMJ RentCar</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="login-bg">
    <nav
      id="mainNavbar"
      class="navbar navbar-expand-lg navbar-dark custom-navbar shadow fixed-top"
      style="background: #1a2236; height: 80px; z-index: 100"
    >
      <div
        class="container-fluid px-4 justify-content-center position-relative"
      >
        <ul
          class="navbar-nav flex-row align-items-center position-absolute start-0 ms-4"
          style="top: 50%; transform: translateY(-50%)"
        >
          <li class="nav-item">
            <a
              class="nav-link"
              href="index.html"
              style="font-size: 1.1rem; color: #fff; font-weight: 600"
              >Menu</a
            >
          </li>
        </ul>
        <a
          class="navbar-brand mx-auto d-flex align-items-center justify-content-center"
          href="#"
          style="font-size: 2.1rem; color: #fff; letter-spacing: 1px"
        >
          <img
            src="assets/logo-rmj.png"
            alt="Logo"
            style="height: 64px; margin-right: 0"
          />
        </a>
        
          <a
            class="btn btn-booknow"
            href="index.html#cars_by_brand"
            style="
              background: #1cc6ea;
              color: #fff;
              font-weight: 600;
              border-radius: 22px;
              padding: 8px 28px;
              font-size: 1.1rem;
              box-shadow: none;
            "
            >Book Now</a
          >
        </div>
      </div>
    </nav>
    <div style="height: 42px"></div>
    <div
      class="login-main"
      style="
        align-items: center;
        justify-content: flex-start;
        min-height: 100vh;
        padding: 40px;
        flex-direction: row;
        display: flex;
        position: relative;
      "
    >
      <div
        class="login-card"
        style="
          max-width: 500px;
          padding: 64px 48px 48px 48px;
          border-radius: 28px;
          margin-left: 0;
          margin-top: 0;
          box-shadow: 0 4px 32px rgba(0, 0, 0, 0.18);
          background: rgba(34, 44, 68, 0.98);
          z-index: 2;
        "
      >
        <div class="login-left" style="padding: 0">
          <img
            src="assets/logo-rmj.png"
            alt="Logo"
            class="login-logo"
            style="
              width: 200px;
              margin-bottom: 40px;
              margin-left: auto;
              margin-right: auto;
              display: block;
            "
          />
          <div
            class="login-title"
            style="font-size: 2rem; text-align: left; margin-bottom: 18px"
          >
            Sign Up
          </div>
          <div class="login-desc" style="text-align: left; margin-bottom: 32px">
            Create your account to get started.
          </div>
          <form class="login-form" id="form_register">
            <div class="mb-2">
              <label for="username">Username</label>
              <input
                type="text"
                class="form-control"
                id="username"
                placeholder="Username"
                name="username"
                required
              />
            </div>
            <div class="mb-2">
              <label for="email">Email</label>
              <input
                type="email"
                class="form-control"
                id="email"
                placeholder="Email"
                name="email"
                required
              />
            </div>
            <div class="mb-2">
              <label for="password">Password</label>
              <input
                type="password"
                class="form-control"
                id="password"
                placeholder="Password"
                name="password"
                required
              />
            </div>
            <input type="hidden" id="role" value="user" />
            <button
              class="btn btn-login"
              type="submit"
              style="margin-bottom: 0"
            >
              Sign Up
            </button>
          </form>
          <div class="login-divider" style="margin: 40px 0 28px 0">
            <span style="height: 1px; background: #697290"></span>
            or
            <span style="height: 1px; background: #697290"></span>
          </div>
          <div style="text-align: left">
            <span style="color: #bfc9d1">Sudah punya akun?</span>
            <a
              href="login.html"
              class="btn btn-signup"
              style="
                border: 2px solid #00e09e;
                color: #00e09e;
                background: transparent;
                padding: 12px 0;
                font-size: 1.1rem;
                margin-left: 8px;
              "
              >Sign in</a
            >
          </div>
        </div>
      </div>
      <div
        class="login-right-content"
        style="
          color: #fff;
          text-align: left;
          max-width: 420px;
          margin-left: 60px;
          margin-top: 0;
          pointer-events: auto;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: flex-start;
          min-height: 420px;
        "
      >
        <h2
          style="
            font-size: 2.3rem;
            font-weight: 700;
            margin-bottom: 18px;
            line-height: 1.2;
            text-align: left;
          "
        >
          Start Your Trip<br />Exploration with Us
        </h2>
        <p
          style="
            color: #bfc9d1;
            font-size: 1.1rem;
            margin-bottom: 32px;
            text-align: left;
          "
        >
          Comfortable Rides, Unforgettable Memories!
        </p>
        <div
          class="login-slider-dots"
          style="display: flex; gap: 10px; margin-top: 24px; margin-left: 2px"
        >
          <span
            class="login-slider-dot active"
            style="
              width: 32px;
              height: 4px;
              border-radius: 2px;
              background: #fff;
              display: inline-block;
            "
          ></span>
          <span
            class="login-slider-dot"
            style="
              width: 32px;
              height: 4px;
              border-radius: 2px;
              background: #697290;
              display: inline-block;
            "
          ></span>
          <span
            class="login-slider-dot"
            style="
              width: 32px;
              height: 4px;
              border-radius: 2px;
              background: #697290;
              display: inline-block;
            "
          ></span>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const formRegister = document.querySelector("#form_register");
      const register = async (data) => {
        try {
          const response = await fetch(
            "https://rmjrentcar-86067911510.asia-southeast2.run.app/register",
            {
              headers: {
                "Content-Type": "application/json",
              },
              method: "POST",
              body: JSON.stringify(data),
            }
          );
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          return await response.json();
        } catch (error) {
          console.error("Error fetching data:", error);
        }
      };

      formRegister.addEventListener("submit", async (event) => {
        event.preventDefault();
        const body = {
          username: username.value,
          password: password.value,
          email: email.value,
          role: "user",
        };
        const result = await register(body);
        if (result && result.msg === "Register Berhasil") {
          alert("Registrasi berhasil!");
          location.replace("login.html");
        } else {
          alert((result && result.message) || "Registrasi gagal");
        }
      });
    </script>
  </body>
</html>
